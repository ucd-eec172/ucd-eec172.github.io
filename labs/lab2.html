<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Lab 2 - Serial Interfacing with SPI and I2C</title>
  <!-- <link rel="stylesheet" href="assets/github-markdown-light.css" /> -->
  <style>
    /*github markdown light*/

    .markdown-body {
      -ms-text-size-adjust: 100%;
      -webkit-text-size-adjust: 100%;
      margin: 0;
      color: #1F2328;
      background-color: #ffffff;
      font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";
      font-size: 16px;
      line-height: 1.5;
      word-wrap: break-word;
    }

    .markdown-body .octicon {
      display: inline-block;
      fill: currentColor;
      vertical-align: text-bottom;
    }

    .markdown-body h1:hover .anchor .octicon-link:before,
    .markdown-body h2:hover .anchor .octicon-link:before,
    .markdown-body h3:hover .anchor .octicon-link:before,
    .markdown-body h4:hover .anchor .octicon-link:before,
    .markdown-body h5:hover .anchor .octicon-link:before,
    .markdown-body h6:hover .anchor .octicon-link:before {
      width: 16px;
      height: 16px;
      content: ' ';
      display: inline-block;
      background-color: currentColor;
      -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
      mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
    }

    .markdown-body details,
    .markdown-body figcaption,
    .markdown-body figure {
      display: block;
    }

    .markdown-body summary {
      display: list-item;
    }

    .markdown-body [hidden] {
      display: none !important;
    }

    .markdown-body a {
      background-color: transparent;
      color: #0969da;
      text-decoration: none;
    }

    .markdown-body abbr[title] {
      border-bottom: none;
      -webkit-text-decoration: underline dotted;
      text-decoration: underline dotted;
    }

    .markdown-body b,
    .markdown-body strong {
      font-weight: 600;
    }

    .markdown-body dfn {
      font-style: italic;
    }

    .markdown-body h1 {
      margin: .67em 0;
      font-weight: 600;
      padding-bottom: .3em;
      font-size: 2em;
      border-bottom: 1px solid hsla(210,18%,87%,1);
    }

    .markdown-body mark {
      background-color: #fff8c5;
      color: #1F2328;
    }

    .markdown-body small {
      font-size: 90%;
    }

    .markdown-body sub,
    .markdown-body sup {
      font-size: 75%;
      line-height: 0;
      position: relative;
      vertical-align: baseline;
    }

    .markdown-body sub {
      bottom: -0.25em;
    }

    .markdown-body sup {
      top: -0.5em;
    }

    .markdown-body img {
      border-style: none;
      max-width: 100%;
      box-sizing: content-box;
      background-color: #ffffff;
    }

    .markdown-body code,
    .markdown-body kbd,
    .markdown-body pre,
    .markdown-body samp {
      font-family: monospace;
      font-size: 1em;
    }

    .markdown-body figure {
      margin: 1em 40px;
    }

    .markdown-body hr {
      box-sizing: content-box;
      overflow: hidden;
      background: transparent;
      border-bottom: 1px solid hsla(210,18%,87%,1);
      height: .25em;
      padding: 0;
      margin: 24px 0;
      background-color: #d0d7de;
      border: 0;
    }

    .markdown-body input {
      font: inherit;
      margin: 0;
      overflow: visible;
      font-family: inherit;
      font-size: inherit;
      line-height: inherit;
    }

    .markdown-body [type=button],
    .markdown-body [type=reset],
    .markdown-body [type=submit] {
      -webkit-appearance: button;
      appearance: button;
    }

    .markdown-body [type=checkbox],
    .markdown-body [type=radio] {
      box-sizing: border-box;
      padding: 0;
    }

    .markdown-body [type=number]::-webkit-inner-spin-button,
    .markdown-body [type=number]::-webkit-outer-spin-button {
      height: auto;
    }

    .markdown-body [type=search]::-webkit-search-cancel-button,
    .markdown-body [type=search]::-webkit-search-decoration {
      -webkit-appearance: none;
      appearance: none;
    }

    .markdown-body ::-webkit-input-placeholder {
      color: inherit;
      opacity: .54;
    }

    .markdown-body ::-webkit-file-upload-button {
      -webkit-appearance: button;
      appearance: button;
      font: inherit;
    }

    .markdown-body a:hover {
      text-decoration: underline;
    }

    .markdown-body ::placeholder {
      color: #6e7781;
      opacity: 1;
    }

    .markdown-body hr::before {
      display: table;
      content: "";
    }

    .markdown-body hr::after {
      display: table;
      clear: both;
      content: "";
    }

    .markdown-body table {
      border-spacing: 0;
      border-collapse: collapse;
      display: block;
      width: max-content;
      max-width: 100%;
      overflow: auto;
    }

    .markdown-body td,
    .markdown-body th {
      padding: 0;
    }

    .markdown-body details summary {
      cursor: pointer;
    }

    .markdown-body details:not([open])>*:not(summary) {
      display: none !important;
    }

    .markdown-body a:focus,
    .markdown-body [role=button]:focus,
    .markdown-body input[type=radio]:focus,
    .markdown-body input[type=checkbox]:focus {
      outline: 2px solid #0969da;
      outline-offset: -2px;
      box-shadow: none;
    }

    .markdown-body a:focus:not(:focus-visible),
    .markdown-body [role=button]:focus:not(:focus-visible),
    .markdown-body input[type=radio]:focus:not(:focus-visible),
    .markdown-body input[type=checkbox]:focus:not(:focus-visible) {
      outline: solid 1px transparent;
    }

    .markdown-body a:focus-visible,
    .markdown-body [role=button]:focus-visible,
    .markdown-body input[type=radio]:focus-visible,
    .markdown-body input[type=checkbox]:focus-visible {
      outline: 2px solid #0969da;
      outline-offset: -2px;
      box-shadow: none;
    }

    .markdown-body a:not([class]):focus,
    .markdown-body a:not([class]):focus-visible,
    .markdown-body input[type=radio]:focus,
    .markdown-body input[type=radio]:focus-visible,
    .markdown-body input[type=checkbox]:focus,
    .markdown-body input[type=checkbox]:focus-visible {
      outline-offset: 0;
    }

    .markdown-body kbd {
      display: inline-block;
      padding: 3px 5px;
      font: 11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
      line-height: 10px;
      color: #1F2328;
      vertical-align: middle;
      background-color: #f6f8fa;
      border: solid 1px rgba(175,184,193,0.2);
      border-bottom-color: rgba(175,184,193,0.2);
      border-radius: 6px;
      box-shadow: inset 0 -1px 0 rgba(175,184,193,0.2);
    }

    .markdown-body h1,
    .markdown-body h2,
    .markdown-body h3,
    .markdown-body h4,
    .markdown-body h5,
    .markdown-body h6 {
      margin-top: 24px;
      margin-bottom: 16px;
      font-weight: 600;
      line-height: 1.25;
    }

    .markdown-body h2 {
      font-weight: 600;
      padding-bottom: .3em;
      font-size: 1.5em;
      border-bottom: 1px solid hsla(210,18%,87%,1);
    }

    .markdown-body h3 {
      font-weight: 600;
      font-size: 1.25em;
    }

    .markdown-body h4 {
      font-weight: 600;
      font-size: 1em;
    }

    .markdown-body h5 {
      font-weight: 600;
      font-size: .875em;
    }

    .markdown-body h6 {
      font-weight: 600;
      font-size: .85em;
      color: #656d76;
    }

    .markdown-body p {
      margin-top: 0;
      margin-bottom: 10px;
    }

    .markdown-body blockquote {
      margin: 0;
      padding: 0 1em;
      color: #656d76;
      border-left: .25em solid #d0d7de;
    }

    .markdown-body ul,
    .markdown-body ol {
      margin-top: 0;
      margin-bottom: 0;
      padding-left: 2em;
    }

    .markdown-body ol ol,
    .markdown-body ul ol {
      list-style-type: lower-roman;
    }

    .markdown-body ul ul ol,
    .markdown-body ul ol ol,
    .markdown-body ol ul ol,
    .markdown-body ol ol ol {
      list-style-type: lower-alpha;
    }

    .markdown-body dd {
      margin-left: 0;
    }

    .markdown-body tt,
    .markdown-body code,
    .markdown-body samp {
      font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
      font-size: 12px;
    }

    .markdown-body pre {
      margin-top: 0;
      margin-bottom: 0;
      font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
      font-size: 12px;
      word-wrap: normal;
    }

    .markdown-body .octicon {
      display: inline-block;
      overflow: visible !important;
      vertical-align: text-bottom;
      fill: currentColor;
    }

    .markdown-body input::-webkit-outer-spin-button,
    .markdown-body input::-webkit-inner-spin-button {
      margin: 0;
      -webkit-appearance: none;
      appearance: none;
    }

    .markdown-body .mr-2 {
      margin-right: 8px !important;
    }

    .markdown-body::before {
      display: table;
      content: "";
    }

    .markdown-body::after {
      display: table;
      clear: both;
      content: "";
    }

    .markdown-body>*:first-child {
      margin-top: 0 !important;
    }

    .markdown-body>*:last-child {
      margin-bottom: 0 !important;
    }

    .markdown-body a:not([href]) {
      color: inherit;
      text-decoration: none;
    }

    .markdown-body .absent {
      color: #d1242f;
    }

    .markdown-body .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
      line-height: 1;
    }

    .markdown-body .anchor:focus {
      outline: none;
    }

    .markdown-body p,
    .markdown-body blockquote,
    .markdown-body ul,
    .markdown-body ol,
    .markdown-body dl,
    .markdown-body table,
    .markdown-body pre,
    .markdown-body details {
      margin-top: 0;
      margin-bottom: 16px;
    }

    .markdown-body blockquote>:first-child {
      margin-top: 0;
    }

    .markdown-body blockquote>:last-child {
      margin-bottom: 0;
    }

    .markdown-body h1 .octicon-link,
    .markdown-body h2 .octicon-link,
    .markdown-body h3 .octicon-link,
    .markdown-body h4 .octicon-link,
    .markdown-body h5 .octicon-link,
    .markdown-body h6 .octicon-link {
      color: #1F2328;
      vertical-align: middle;
      visibility: hidden;
    }

    .markdown-body h1:hover .anchor,
    .markdown-body h2:hover .anchor,
    .markdown-body h3:hover .anchor,
    .markdown-body h4:hover .anchor,
    .markdown-body h5:hover .anchor,
    .markdown-body h6:hover .anchor {
      text-decoration: none;
    }

    .markdown-body h1:hover .anchor .octicon-link,
    .markdown-body h2:hover .anchor .octicon-link,
    .markdown-body h3:hover .anchor .octicon-link,
    .markdown-body h4:hover .anchor .octicon-link,
    .markdown-body h5:hover .anchor .octicon-link,
    .markdown-body h6:hover .anchor .octicon-link {
      visibility: visible;
    }

    .markdown-body h1 tt,
    .markdown-body h1 code,
    .markdown-body h2 tt,
    .markdown-body h2 code,
    .markdown-body h3 tt,
    .markdown-body h3 code,
    .markdown-body h4 tt,
    .markdown-body h4 code,
    .markdown-body h5 tt,
    .markdown-body h5 code,
    .markdown-body h6 tt,
    .markdown-body h6 code {
      padding: 0 .2em;
      font-size: inherit;
    }

    .markdown-body summary h1,
    .markdown-body summary h2,
    .markdown-body summary h3,
    .markdown-body summary h4,
    .markdown-body summary h5,
    .markdown-body summary h6 {
      display: inline-block;
    }

    .markdown-body summary h1 .anchor,
    .markdown-body summary h2 .anchor,
    .markdown-body summary h3 .anchor,
    .markdown-body summary h4 .anchor,
    .markdown-body summary h5 .anchor,
    .markdown-body summary h6 .anchor {
      margin-left: -40px;
    }

    .markdown-body summary h1,
    .markdown-body summary h2 {
      padding-bottom: 0;
      border-bottom: 0;
    }

    .markdown-body ul.no-list,
    .markdown-body ol.no-list {
      padding: 0;
      list-style-type: none;
    }

    .markdown-body ol[type="a s"] {
      list-style-type: lower-alpha;
    }

    .markdown-body ol[type="A s"] {
      list-style-type: upper-alpha;
    }

    .markdown-body ol[type="i s"] {
      list-style-type: lower-roman;
    }

    .markdown-body ol[type="I s"] {
      list-style-type: upper-roman;
    }

    .markdown-body ol[type="1"] {
      list-style-type: decimal;
    }

    .markdown-body div>ol:not([type]) {
      list-style-type: decimal;
    }

    .markdown-body ul ul,
    .markdown-body ul ol,
    .markdown-body ol ol,
    .markdown-body ol ul {
      margin-top: 0;
      margin-bottom: 0;
    }

    .markdown-body li>p {
      margin-top: 16px;
    }

    .markdown-body li+li {
      margin-top: .25em;
    }

    .markdown-body dl {
      padding: 0;
    }

    .markdown-body dl dt {
      padding: 0;
      margin-top: 16px;
      font-size: 1em;
      font-style: italic;
      font-weight: 600;
    }

    .markdown-body dl dd {
      padding: 0 16px;
      margin-bottom: 16px;
    }

    .markdown-body table th {
      font-weight: 600;
    }

    .markdown-body table th,
    .markdown-body table td {
      padding: 6px 13px;
      border: 1px solid #d0d7de;
    }

    .markdown-body table td>:last-child {
      margin-bottom: 0;
    }

    .markdown-body table tr {
      background-color: #ffffff;
      border-top: 1px solid hsla(210,18%,87%,1);
    }

    .markdown-body table tr:nth-child(2n) {
      background-color: #f6f8fa;
    }

    .markdown-body table img {
      background-color: transparent;
    }

    .markdown-body img[align=right] {
      padding-left: 20px;
    }

    .markdown-body img[align=left] {
      padding-right: 20px;
    }

    .markdown-body .emoji {
      max-width: none;
      vertical-align: text-top;
      background-color: transparent;
    }

    .markdown-body span.frame {
      display: block;
      overflow: hidden;
    }

    .markdown-body span.frame>span {
      display: block;
      float: left;
      width: auto;
      padding: 7px;
      margin: 13px 0 0;
      overflow: hidden;
      border: 1px solid #d0d7de;
    }

    .markdown-body span.frame span img {
      display: block;
      float: left;
    }

    .markdown-body span.frame span span {
      display: block;
      padding: 5px 0 0;
      clear: both;
      color: #1F2328;
    }

    .markdown-body span.align-center {
      display: block;
      overflow: hidden;
      clear: both;
    }

    .markdown-body span.align-center>span {
      display: block;
      margin: 13px auto 0;
      overflow: hidden;
      text-align: center;
    }

    .markdown-body span.align-center span img {
      margin: 0 auto;
      text-align: center;
    }

    .markdown-body span.align-right {
      display: block;
      overflow: hidden;
      clear: both;
    }

    .markdown-body span.align-right>span {
      display: block;
      margin: 13px 0 0;
      overflow: hidden;
      text-align: right;
    }

    .markdown-body span.align-right span img {
      margin: 0;
      text-align: right;
    }

    .markdown-body span.float-left {
      display: block;
      float: left;
      margin-right: 13px;
      overflow: hidden;
    }

    .markdown-body span.float-left span {
      margin: 13px 0 0;
    }

    .markdown-body span.float-right {
      display: block;
      float: right;
      margin-left: 13px;
      overflow: hidden;
    }

    .markdown-body span.float-right>span {
      display: block;
      margin: 13px auto 0;
      overflow: hidden;
      text-align: right;
    }

    .markdown-body code,
    .markdown-body tt {
      padding: .2em .4em;
      margin: 0;
      font-size: 85%;
      white-space: break-spaces;
      background-color: rgba(175,184,193,0.2);
      border-radius: 6px;
    }

    .markdown-body code br,
    .markdown-body tt br {
      display: none;
    }

    .markdown-body del code {
      text-decoration: inherit;
    }

    .markdown-body samp {
      font-size: 85%;
    }

    .markdown-body pre code {
      font-size: 100%;
    }

    .markdown-body pre>code {
      padding: 0;
      margin: 0;
      word-break: normal;
      white-space: pre;
      background: transparent;
      border: 0;
    }

    .markdown-body .highlight {
      margin-bottom: 16px;
    }

    .markdown-body .highlight pre {
      margin-bottom: 0;
      word-break: normal;
    }

    .markdown-body .highlight pre,
    .markdown-body pre {
      padding: 16px;
      overflow: auto;
      font-size: 85%;
      line-height: 1.45;
      color: #1F2328;
      background-color: #f6f8fa;
      border-radius: 6px;
    }

    .markdown-body pre code,
    .markdown-body pre tt {
      display: inline;
      max-width: auto;
      padding: 0;
      margin: 0;
      overflow: visible;
      line-height: inherit;
      word-wrap: normal;
      background-color: transparent;
      border: 0;
    }

    .markdown-body .csv-data td,
    .markdown-body .csv-data th {
      padding: 5px;
      overflow: hidden;
      font-size: 12px;
      line-height: 1;
      text-align: left;
      white-space: nowrap;
    }

    .markdown-body .csv-data .blob-num {
      padding: 10px 8px 9px;
      text-align: right;
      background: #ffffff;
      border: 0;
    }

    .markdown-body .csv-data tr {
      border-top: 0;
    }

    .markdown-body .csv-data th {
      font-weight: 600;
      background: #f6f8fa;
      border-top: 0;
    }

    .markdown-body [data-footnote-ref]::before {
      content: "[";
    }

    .markdown-body [data-footnote-ref]::after {
      content: "]";
    }

    .markdown-body .footnotes {
      font-size: 12px;
      color: #656d76;
      border-top: 1px solid #d0d7de;
    }

    .markdown-body .footnotes ol {
      padding-left: 16px;
    }

    .markdown-body .footnotes ol ul {
      display: inline-block;
      padding-left: 16px;
      margin-top: 16px;
    }

    .markdown-body .footnotes li {
      position: relative;
    }

    .markdown-body .footnotes li:target::before {
      position: absolute;
      top: -8px;
      right: -8px;
      bottom: -8px;
      left: -24px;
      pointer-events: none;
      content: "";
      border: 2px solid #0969da;
      border-radius: 6px;
    }

    .markdown-body .footnotes li:target {
      color: #1F2328;
    }

    .markdown-body .footnotes .data-footnote-backref g-emoji {
      font-family: monospace;
    }

    .markdown-body .pl-c {
      color: #57606a;
    }

    .markdown-body .pl-c1,
    .markdown-body .pl-s .pl-v {
      color: #0550ae;
    }

    .markdown-body .pl-e,
    .markdown-body .pl-en {
      color: #6639ba;
    }

    .markdown-body .pl-smi,
    .markdown-body .pl-s .pl-s1 {
      color: #24292f;
    }

    .markdown-body .pl-ent {
      color: #116329;
    }

    .markdown-body .pl-k {
      color: #cf222e;
    }

    .markdown-body .pl-s,
    .markdown-body .pl-pds,
    .markdown-body .pl-s .pl-pse .pl-s1,
    .markdown-body .pl-sr,
    .markdown-body .pl-sr .pl-cce,
    .markdown-body .pl-sr .pl-sre,
    .markdown-body .pl-sr .pl-sra {
      color: #0a3069;
    }

    .markdown-body .pl-v,
    .markdown-body .pl-smw {
      color: #953800;
    }

    .markdown-body .pl-bu {
      color: #82071e;
    }

    .markdown-body .pl-ii {
      color: #f6f8fa;
      background-color: #82071e;
    }

    .markdown-body .pl-c2 {
      color: #f6f8fa;
      background-color: #cf222e;
    }

    .markdown-body .pl-sr .pl-cce {
      font-weight: bold;
      color: #116329;
    }

    .markdown-body .pl-ml {
      color: #3b2300;
    }

    .markdown-body .pl-mh,
    .markdown-body .pl-mh .pl-en,
    .markdown-body .pl-ms {
      font-weight: bold;
      color: #0550ae;
    }

    .markdown-body .pl-mi {
      font-style: italic;
      color: #24292f;
    }

    .markdown-body .pl-mb {
      font-weight: bold;
      color: #24292f;
    }

    .markdown-body .pl-md {
      color: #82071e;
      background-color: #ffebe9;
    }

    .markdown-body .pl-mi1 {
      color: #116329;
      background-color: #dafbe1;
    }

    .markdown-body .pl-mc {
      color: #953800;
      background-color: #ffd8b5;
    }

    .markdown-body .pl-mi2 {
      color: #eaeef2;
      background-color: #0550ae;
    }

    .markdown-body .pl-mdr {
      font-weight: bold;
      color: #8250df;
    }

    .markdown-body .pl-ba {
      color: #57606a;
    }

    .markdown-body .pl-sg {
      color: #8c959f;
    }

    .markdown-body .pl-corl {
      text-decoration: underline;
      color: #0a3069;
    }

    .markdown-body g-emoji {
      display: inline-block;
      min-width: 1ch;
      font-family: "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
      font-size: 1em;
      font-style: normal !important;
      font-weight: 400;
      line-height: 1;
      vertical-align: -0.075em;
    }

    .markdown-body g-emoji img {
      width: 1em;
      height: 1em;
    }

    .markdown-body .task-list-item {
      list-style-type: none;
    }

    .markdown-body .task-list-item label {
      font-weight: 400;
    }

    .markdown-body .task-list-item.enabled label {
      cursor: pointer;
    }

    .markdown-body .task-list-item+.task-list-item {
      margin-top: 4px;
    }

    .markdown-body .task-list-item .handle {
      display: none;
    }

    .markdown-body .task-list-item-checkbox {
      margin: 0 .2em .25em -1.4em;
      vertical-align: middle;
    }

    .markdown-body .contains-task-list:dir(rtl) .task-list-item-checkbox {
      margin: 0 -1.6em .25em .2em;
    }

    .markdown-body .contains-task-list {
      position: relative;
    }

    .markdown-body .contains-task-list:hover .task-list-item-convert-container,
    .markdown-body .contains-task-list:focus-within .task-list-item-convert-container {
      display: block;
      width: auto;
      height: 24px;
      overflow: visible;
      clip: auto;
    }

    .markdown-body ::-webkit-calendar-picker-indicator {
      filter: invert(50%);
    }

    .markdown-body .markdown-alert {
      padding: 8px 16px;
      margin-bottom: 16px;
      color: inherit;
      border-left: .25em solid #d0d7de;
    }

    .markdown-body .markdown-alert>:first-child {
      margin-top: 0;
    }

    .markdown-body .markdown-alert>:last-child {
      margin-bottom: 0;
    }

    .markdown-body .markdown-alert .markdown-alert-title {
      display: flex;
      font-weight: 500;
      align-items: center;
      line-height: 1;
    }

    .markdown-body .markdown-alert.markdown-alert-note {
      border-left-color: #0969da;
    }

    .markdown-body .markdown-alert.markdown-alert-note .markdown-alert-title {
      color: #0969da;
    }

    .markdown-body .markdown-alert.markdown-alert-important {
      border-left-color: #8250df;
    }

    .markdown-body .markdown-alert.markdown-alert-important .markdown-alert-title {
      color: #8250df;
    }

    .markdown-body .markdown-alert.markdown-alert-warning {
      border-left-color: #9a6700;
    }

    .markdown-body .markdown-alert.markdown-alert-warning .markdown-alert-title {
      color: #9a6700;
    }

    .markdown-body .markdown-alert.markdown-alert-tip {
      border-left-color: #1f883d;
    }

    .markdown-body .markdown-alert.markdown-alert-tip .markdown-alert-title {
      color: #1a7f37;
    }

    .markdown-body .markdown-alert.markdown-alert-caution {
      border-left-color: #cf222e;
    }

    .markdown-body .markdown-alert.markdown-alert-caution .markdown-alert-title {
      color: #d1242f;
    }

    /*end github markdown light*/

        /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    
    .markdown-body {
        box-sizing: border-box;
        min-width: 200px;
        max-width: 980px;
        margin: auto;
        padding: 45px;
    }

    div.fig {
      vertical-align: top;
      /* display: inline-block; */
      display: block;
      text-align: center;
      margin-left: auto;
      margin-right: auto;
      width: auto;
    }

    .caption {
      display: block;
    }

    @media (max-width: 767px) {
        .markdown-body {
            padding: 15px;
        }
    }
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<article class="markdown-body">
<header id="title-block-header">
<h1 class="title">Lab 2 - Serial Interfacing with SPI and I2C</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#overview" id="toc-overview">Overview</a></li>
<li><a href="#learning-objectives" id="toc-learning-objectives">Learning
Objectives</a></li>
<li><a href="#requirements-and-dependencies"
id="toc-requirements-and-dependencies">Requirements and Dependencies</a>
<ul>
<li><a href="#hardware-requirements"
id="toc-hardware-requirements">Hardware Requirements</a></li>
<li><a href="#software-requirements"
id="toc-software-requirements">Software Requirements</a></li>
<li><a href="#lab-datasheets" id="toc-lab-datasheets">Lab
Datasheets</a></li>
</ul></li>
<li><a href="#background---synchronous-serial-protocols"
id="toc-background---synchronous-serial-protocols">Background -
Synchronous Serial Protocols</a>
<ul>
<li><a href="#spi" id="toc-spi">SPI</a></li>
<li><a href="#i2c" id="toc-i2c">I2C</a></li>
</ul></li>
<li><a
href="#part-i-controlling-the-oled-via-serial-peripheral-interface-spi"
id="toc-part-i-controlling-the-oled-via-serial-peripheral-interface-spi">Part
I: Controlling the OLED via Serial Peripheral Interface (SPI)</a>
<ul>
<li><a href="#running-spi_demo-on-two-cc3200-launchpads"
id="toc-running-spi_demo-on-two-cc3200-launchpads">Running
<code>spi_demo</code> on two CC3200 LaunchPads</a></li>
<li><a href="#implement-oled-interface-using-spi"
id="toc-implement-oled-interface-using-spi">Implement OLED interface
using SPI</a></li>
<li><a href="#lab-checkoff-task-1" id="toc-lab-checkoff-task-1"><em>Lab
Checkoff Task 1</em></a></li>
<li><a href="#verifying-spi-waveforms-using-a-saleae-logic"
id="toc-verifying-spi-waveforms-using-a-saleae-logic">Verifying SPI
waveforms using a Saleae logic</a></li>
<li><a href="#lab-checkoff-task-2" id="toc-lab-checkoff-task-2"><em>Lab
Checkoff Task 2</em></a></li>
</ul></li>
<li><a href="#part-ii-controlling-the-bma222-accelerometer-with-i2c"
id="toc-part-ii-controlling-the-bma222-accelerometer-with-i2c">Part II:
Controlling the BMA222 accelerometer with I2C</a>
<ul>
<li><a href="#running-i2c_demo-on-the-cc3200-launchpad"
id="toc-running-i2c_demo-on-the-cc3200-launchpad">Running
<code>i2c_demo</code> on the CC3200 LaunchPad</a></li>
<li><a href="#verifying-i2c-waveforms-using-a-saleae-logic"
id="toc-verifying-i2c-waveforms-using-a-saleae-logic">Verifying I2C
waveforms using a Saleae logic</a></li>
<li><a href="#lab-checkoff-task-3" id="toc-lab-checkoff-task-3"><em>Lab
Checkoff Task 3</em></a></li>
</ul></li>
<li><a href="#part-iii-sliding-ball" id="toc-part-iii-sliding-ball">Part
III: Sliding Ball</a>
<ul>
<li><a href="#lab-checkoff-task-4" id="toc-lab-checkoff-task-4"><em>Lab
Checkoff Task 4</em></a></li>
</ul></li>
<li><a href="#lab-report" id="toc-lab-report">Lab Report</a></li>
</ul>
</nav>
<h2 id="overview">Overview</h2>
<p>In this lab, you will use SPI to interface the CC3200 LaunchPad to a
color OLED display. You will also use I2C to communicate with an
on-board Bosch BMA222 acceleration sensor. Your application program will
detect the XY tilt of your board based on BMA222 readings and use the
tilt to control an icon on your OLED display. You will also use a Saleae
logic probe to capture and display SPI and I2C signal waveforms.</p>
<h2 id="learning-objectives">Learning Objectives</h2>
<p>At the end of this lab, students should be able to:</p>
<ul>
<li>Describe the connection topology of SPI and I2C devices</li>
<li>Describe at a high level the protocol state machine for SPI and
I2C</li>
<li>Connect and configure SPI and I2C-based peripherals with a
microcontroller</li>
<li>Write code to interface a MCU with SPI and I2C devices</li>
<li>Configure a logic analyzer for observing digital signals</li>
</ul>
<h2 id="requirements-and-dependencies">Requirements and
Dependencies</h2>
<h3 id="hardware-requirements">Hardware Requirements</h3>
<ul>
<li>2 Adafruit OLED Breakout Board - 16-bit Color 1.5" (product id:
1431) on small breadboards</li>
<li>1 Saleae USB Logic Analyzer Jumper wires</li>
<li>(Optional) USB Flash Drive for saving code</li>
</ul>
<blockquote>
<p><strong>Note:</strong> Do not lose the shorting blocks (jumpers) that
come with the board. They are used to configure different hardware
functions on the board, and may be needed for this and future labs.
Unused shorting blocks should be kept on the board attached to a single
header pin.</p>
</blockquote>
<h3 id="software-requirements">Software Requirements</h3>
<ul>
<li>CCS</li>
<li>Saleae Logic 2 Software</li>
<li>(Recommended) Git and GitHub<sup>1</sup></li>
</ul>
<blockquote>
<p>[1]: We highly recommend using Git and GitHub for source code version
control starting with this lab. If you are unfamiliar with git and
GitHub, you can learn more about it from <a
href="https://www.youtube.com/watch?v=tRZGeaHPoaw">this youtube
video</a></p>
</blockquote>
<h3 id="lab-datasheets">Lab Datasheets</h3>
<p>Refer to the following technical documents, which should be posted on
the course website:</p>
<ul>
<li>CC3200 Technical Reference Manual</li>
<li>CC3200 LaunchPad User Guide</li>
<li>CC3200 LaunchPad Schematic</li>
<li>CC3200 Datasheet</li>
<li>SSD1351 128 RGB x 128 Dot Matrix OLED/Common Driver with Controller
Advance Information</li>
<li>OLED Display Module Product Specification (Doc No. SAS1-D038-A)</li>
<li>Bosch BMA222 Data sheet (Accelerometer)</li>
</ul>
<h2 id="background---synchronous-serial-protocols">Background -
Synchronous Serial Protocols</h2>
<p>Synchronous serial protocols, particularly SPI and I2C are ubiquitous
in embedded systems. They are the primary mode of communication between
the microcontroller and the subsystems it controls. Spending time to
gain an in-depth understanding of these protocols is a valuable effort,
as it will help you greatly when debugging communications between
components in your systems. A short primer on the topics follows to give
you a high-level overview, but is by no means comprehensive.</p>
<h3 id="spi">SPI</h3>
<p><em><strong>Serial Peripheral Interface (SPI)</strong></em> is a 3 or
4 wire communication protocol designed for high-speed, high-throughput
connections. Commonly, the 4 signals in SPI are
<em><strong>COPI</strong></em>, <em><strong>CIPO</strong></em>,
<em><strong>SCLK</strong></em>, and <em><strong>CS</strong></em>. COPI
and CIPO are often also referred to as MOSI and MISO. SPI is a
<em><strong>full-duplex</strong></em> communication protocol, where the
controller sends data to the peripheral on the COPI line, and
simultaneously receives data on the CIPO line. The communication speed
is determined by the SCLK signal's frequency, generated by the
controller.</p>
<p>SPI can support multiple devices on a shared bus, where a single
controller can communicate with many peripherals. There are 2 wiring
configurations that are commonly used to accomplish this: the
<em><strong>Star Topology</strong></em> and the <em><strong>Daisy Chain
Topology</strong></em>.</p>
<h3 id="i2c">I2C</h3>
<p><em><strong>Inter-Integrated Circuit (I2C)</strong></em> protocol is
a 2-wire communication protocol designed for simple hardware
configuration and flexibility. The 2 signals of relevance in I2C are
<em><strong>SDA</strong></em> and <em><strong>SCK</strong></em>. I2C is
a <em><strong>half-duplex</strong></em> communication protocol, where
the controller initiates communication with the peripheral and indicates
whether the operation is a write to the peripheral or a read from it.
Regardless, like SPI, the communications are synchronized by the clock
signal that the controller generates.</p>
<p>I2C can also support multiple devices on a shared bus, and can even
support multiple controllers with multiple peripherals, with additional
constraints on the protocol steps.</p>
<hr />
<h2
id="part-i-controlling-the-oled-via-serial-peripheral-interface-spi">Part
I: Controlling the OLED via Serial Peripheral Interface (SPI)</h2>
<p>In this part, you will interface to the 128x128 color organic
light-emitting diode (OLED) display to the CC3200 LaunchPad using
SPI.</p>
<h3 id="running-spi_demo-on-two-cc3200-launchpads">Running
<code>spi_demo</code> on two CC3200 LaunchPads</h3>
<p>As a starting point, you should study, import, build, and test the
<code>spi_demo</code> project on two CC3200 LaunchPads. The project is
documented on TI's website <a
href="https://software-dl.ti.com/ecs/CC3200SDK/1_5_0/exports/cc3200-sdk/example/spi_demo/README.html">here</a>.</p>
<p>In this demo, one launchpad will be programmed as the SPI controller,
and the other as the peripheral. Since they must both be programmed, and
CCS will not allow you to connect to multiple devices from the same
instance and workspace, you have a few options:</p>
<ul>
<li>Program each launchpad from a separate computer</li>
<li>Flash one launchpad with uniflash before running the other on
CCS</li>
<li>Launching 2 instances of CCS with <strong>different
workspaces</strong> and connecting to separate devices.</li>
</ul>
<p>When programming the SPI controller board, you should set
<code>MASTER_MODE</code> to <code>1</code> in <code>main.c</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MASTER_MODE </span><span class="dv">1</span></span></code></pre></div>
<p>For the SPI peripheral board, you should set <code>MASTER_MODE</code>
to <code>0</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MASTER_MODE </span><span class="dv">0</span></span></code></pre></div>
<p>The TI documentation describes the wiring between the two LaunchPad
boards. Each LaunchPad will also connect to its own serial terminal
window.</p>
<p>Note that you can use a single host computer running two instances of
CCS and two serial terminals or you could have each LaunchPad connected
to a separate computer. As described in the documentation:</p>
<blockquote>
<p>Always execute master application followed by slave application to
avoid slave SPI receiving garbage.</p>
</blockquote>
<h3 id="implement-oled-interface-using-spi">Implement OLED interface
using SPI</h3>
<p>For the SPI interface to the OLED, you will need to use the interface
signals shown in the table below.</p>
<p>Note that you will use <strong>GPIO</strong> signals configured as
outputs to control the <em>DC</em> (Data/Command), the <em>OLEDCS</em>
(OC) and the <em>RESET</em> signals on the OLED. You can choose any
unused GPIO signals on the LaunchPad headers <code>P1</code> or
<code>P2</code>. However, check the LaunchPad schematic to verify that
the signals are truly available. For example, the GPIO on
<code>P2.9</code> (Dev Pin #55) is the <code>UART0_TX</code> signal and
is not available for GPIO when the console window is used.</p>
<p>Additionally Do not use the LaunchPad’s <code>RESET_OUT</code> signal
for the OLED <code>RESET</code> since you should be able to reset the
OLED independently from the CC3200 LaunchPad.</p>
<blockquote>
<p><strong>Note:</strong> We are using a GPIO signal to control the
<code>OLEDCS</code> instead of the dedicated <code>SPI_CS</code> signal
because we plan multiple SPI devices on the CC3200’s general-purpose SPI
port.</p>
</blockquote>
<blockquote>
<p><strong>Note:</strong> You should be using the TI SysConfig Tool to
enable the SPI, UART, and GPIO peripherals. Remember to uncheck CTS and
RTS under the UART module, and configure the GPIO input/output setting.
You will not need Output OD (open drain)</p>
</blockquote>
<table align="center">
<colgroup>
<col style="width: 45%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>OLED signal</strong>
</th>
<th><strong>LaunchPad interface</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>MOSI (SI)</td>
<td>SPI_DOUT ( MOSI)</td>
</tr>
<tr class="even">
<td>SCK (CL)</td>
<td>SPI_CLK (SCLK)</td>
</tr>
<tr class="odd">
<td>DC</td>
<td>GPIO</td>
</tr>
<tr class="even">
<td>RESET (R)</td>
<td>GPIO</td>
</tr>
<tr class="odd">
<td>OLEDCS (OC)</td>
<td>GPIO</td>
</tr>
<tr class="even">
<td>SDCS (SC)</td>
<td>n.c. (no connection)</td>
</tr>
<tr class="odd">
<td>MISO (SO)</td>
<td>n.c. (no connection)</td>
</tr>
<tr class="even">
<td>CD</td>
<td>n.c. (no connection)</td>
</tr>
<tr class="odd">
<td>3V</td>
<td>n.c. (no connection)</td>
</tr>
<tr class="even">
<td>Vin (+)</td>
<td>3.3V</td>
</tr>
<tr class="odd">
<td>GND (G)</td>
<td>GND</td>
</tr>
</tbody>
</table>

<p>Adafruit provides a <a
href="http://www.adafruit.com/product/1431">link</a> to an open source
graphics library for this display. The code is written for Arduino so we
need to port it to the CC3200. We will provide modified library
functions with the Arduino-specific code removed or commented out.</p>
<p>Your task will be to write the low-level functions
<code>WriteData()</code> and <code>WriteCommand()</code>, which use the
SPI port, to write a data or command byte to the OLED. You should study
the SPI example program that you tested in Part 1.</p>
<p>The <code>WriteData()</code> and <code>WriteCommand()</code>
functions allow you to make use of the higher-level OLED library
functions. Look for <code>TODO</code> comments in the
<code>Adafruit_OLED.c</code> and <code>test.c</code> files for specific
tasks.</p>
<hr />
<h3 id="lab-checkoff-task-1"><em>Lab Checkoff Task 1</em></h3>
<p><strong>Write a test program that mimics the Arduino example
<code>test.ino</code> found on <a
href="https://github.com/adafruit/Adafruit-SSD1351-library/blob/master/examples/est/test.ino">github</a></strong></p>
<p><strong>Your test program for the OLED display should do the
following:</strong></p>
<ul>
<li>Print the full character-set found in the font table in
<code>glcdfont.h</code>.</li>
<li>Print the string “Hello world!” to the display</li>
<li>Display a pattern of 8 bands of different colors
<em>horizontally</em> across the full OLED display.</li>
<li>Display a pattern of 8 bands of different colors <em>vertically</em>
across the full OLED display.</li>
<li>Call the <code>testlines()</code> function to display diagonal
lines.</li>
<li>Call the <code>testfastlines()</code> function to display a
rectangular grid pattern.</li>
<li>Call the <code>testdrawrects()</code> function to draw a pattern of
rectangles.</li>
<li>Call the <code>testfillrects()</code> function.</li>
<li>Call the <code>testfillcircles()</code> and
<code>testdrawcircles()</code> functions.</li>
<li>Call the <code>testroundrects()</code> function.</li>
<li>Call the <code>testtriangles()</code> function.</li>
</ul>
<blockquote>
<p><strong>Note:</strong> There should be a small delay between calling
each of these functions to allow each pattern to be clearly seen. Your
program should be an infinite loop that continually cycles through the
specified test patterns.</p>
</blockquote>
<p><strong>Demonstrate the modification to your TA to receive checkoff.
You may continue to the next part in the meantime.</strong></p>
<hr />
<h3 id="verifying-spi-waveforms-using-a-saleae-logic">Verifying SPI
waveforms using a Saleae logic</h3>
<ol type="1">
<li><p>To use the logic analyzer on your personal machine, you will need
to install the <em>Logic 2</em> software. The link can be found on the
<a href="lab-setup.html">lab setup page</a>.</p>
<!-- (version 1.1.15) -->

<p>The Saleae User Guide can be found <a
href="https://support.saleae.com/user-guide">online</a></p>
<blockquote>
<p><strong>Note:</strong> When plugging the wire harness into the logic
analyzer pod, notice that the orientation is shown on the bottom of the
pod. <strong>Make sure that the ground symbol on the bottom of the
Saleae module is aligned with the grey wire.</strong> Black is data
Channel 0, Brown is Channel 1 and so on (the colors follow the color
code for resistor values). <strong>You should make the signal
connections with both the CC3200 LaunchPad and the Saleae logic probe
<em>unpowered</em>!</strong></p>
</blockquote>
<img src="./media/lab2-logic-analyzer.jpg" style="width:5in;height:auto" alt="saleae-logic.jpg" />
</li>
<li><p>The Saleae application includes various serial protocol analyzer,
including SPI. Turn on the SPI analyzer. To configure the SPI analyzer,
click on the gear icon and select Enable Settings from the menu
options.</p></li>
<li><p>Capture an SPI waveform using the Saleae logic probe for
verification. <strong>Use <code>Options &gt; Save Screen Region</code>
feature to save a picture of your SPI waveforms for your lab
report</strong>. Another method is to take a screenshot using the
Windows Snipping Tool or <code>Cmd+Shift+4</code> on Mac to capture the
area on the screen. You will need to explain how the waveform you
captured is related to your software. An example screen-shot is shown
below.</p>
<img src="./media/lab2-logic-spi-example.jpg" style="width:7in;height:auto" />
</li>
</ol>
<hr />
<h3 id="lab-checkoff-task-2"><em>Lab Checkoff Task 2</em></h3>
<p><strong>Demonstrate to your TA that you captured the SPI waveform
using the Saleae logic program.</strong> For this purpose, you should
capture the very first packets transmitted from the micro controller. To
be more specific, the first few lines of codes in the
<code>Adafruit_Init</code> program are the <code>WriteData()</code> and
<code>WriteCommand()</code>, and the Data/Command is sent through the
SPI to the OLED board. <strong>You should confirm these with your code
and explain how the captured waveform relates to these
instructions.</strong></p>
<p><strong>The captured SPI waveform should be included in your lab
report with a description of the data it contains and how it relates to
the code you wrote.</strong></p>
<hr />
<h2 id="part-ii-controlling-the-bma222-accelerometer-with-i2c">Part II:
Controlling the BMA222 accelerometer with I2C</h2>
<p>In this part, you will interface to the Bosch BMA222 accelerometer on
the CC3200 Launchpad using I2C. You will then write an application
program that uses the acceleration data to control a graphical icon on
your OLED.</p>
<h3 id="running-i2c_demo-on-the-cc3200-launchpad">Running
<code>i2c_demo</code> on the CC3200 LaunchPad</h3>
<p>As a starting point, you should study, import, build, and test the
<code>i2c_demo</code> project on a CC3200 LaunchPad. The project is
documented <a
href="https://software-dl.ti.com/ecs/CC3200SDK/1_5_0/exports/cc3200-sdk/example/i2c_demo/README.html">here</a>.</p>
<p>In addition, you should study the Bosch BMA222 Data sheet to
understand how the acceleration sensor can be used. For example, the
acceleration data is described in Section 4.4.1 and includes the
following basic information:</p>
<blockquote>
<p>“The width of acceleration data is 8 bits given in two’s complement
representation. The 8 bits for each axis are given in registers
(<code>0x03</code>) <code>acc_x</code>, (<code>0x05</code>)
<code>acc_y</code> and (<code>0x07</code>) <code>acc_z</code>.”</p>
</blockquote>
<p>You can use the <code>i2c_demo</code> program to see what kinds of
acceleration data you get for various tilt angles using the readreg
command as shown below, where the BMA222 has I2C device address
<code>0x18</code>. The following three commands read the acceleration
data for the x, y and z axes, respectively.</p>
<pre class="text"><code>cmd# readreg 0x18 0x3 1 
cmd# readreg 0x18 0x5 1 
cmd# readreg 0x18 0x7 1</code></pre>
<p>Another way to read the data is to read multiple bytes at once, such
as in the command below. This command will read the new data flag and
the acceleration data for the x, y and z axes, respectively.</p>
<pre class="text"><code>cmd# readreg 0x18 0x2 6</code></pre>
<h3 id="verifying-i2c-waveforms-using-a-saleae-logic">Verifying I2C
waveforms using a Saleae logic</h3>
<p>Set up your Saleae logic probe to capture I2C waveforms by enabling
the I2C Analyzer. You will need to connect three wires: Ground,
<code>I2C_SCL</code>, and <code>I2C_SDA</code>.</p>
<p>To avoid damaging the electronics, you should always make the signal
connections with both the CC3200 LaunchPad and the Saleae logic probe
<em><strong>unpowered</strong></em>. As before, make sure that the
ground symbol on the bottom of the Saleae module is aligned with the
grey wire and connect the grey wire to one of the CC3200 GND pins. You
can check the <code>pinmux.c</code> file in the <code>i2c_demo</code>
project to find out which pins are used for <code>I2C_SCL</code> and
<code>I2C_SDA</code>. Connect two of the Saleae probes, such as the
Black and Brown leads, to the appropriate header pins.</p>
<p><strong>Double-check your ground and signal connections
<em>before</em> you turn on the power to the CC3200
LaunchPad.</strong></p>
<hr />
<h3 id="lab-checkoff-task-3"><em>Lab Checkoff Task 3</em></h3>
<p><strong>Capture two I2C waveforms using the Saleae logic probe, one
reading the x axis data and one reading the y axis data. Explain which
command was used to generate each waveform and how the waveform
corresponds to what you expect to see.</strong> An example screen-shot
of an I2C waveform is shown below.</p>
<img src="./media/lab2-logic-i2c-example.jpg" style="width:7in;height:auto" />

<p><strong>Include images of both waveforms in your lab
report.</strong></p>
<hr />
<h2 id="part-iii-sliding-ball">Part III: Sliding Ball</h2>
<p>In this part, you will use the accelerometer to move a small “ball”
(a filled circle icon) with a radius of about 4 pixels (± 2) around on
the OLED display.</p>
<p>The accelerometer output can be used to determine the accelerometer
<em>pitch</em> and <em>roll</em> orientation angles, which can be used
to control the motion of the ball left, right, up and down.</p>
<p><strong>Requirements:</strong></p>
<ul>
<li><p>Initially, you should display the ball at the center of your OLED
display. When the CC3200 Launchpad is flat, the ball should be
stationary on the display.</p></li>
<li><p>Rotating the accelerometer around the x-axis (roll) should move
the ball left and right. The steeper the roll angle, the faster the ball
should scroll across the OLED display.</p></li>
<li><p>Rotating the accelerometer around the y-axis (pitch) will move
the ball up and down on the OLED display, where the speed of the ball
should be proportional to the pitch angle.</p></li>
<li><p>When the ball reaches the edge of the OLED display, it should not
move any further in that direction. That is, it should not scroll off
the screen, but should stop at any edge.</p></li>
</ul>
<blockquote>
<p><strong>Note 1:</strong> Since the Z measurement is not used, you can
disable or ignore the Z measurements.</p>
</blockquote>
<blockquote>
<p><strong>Note 2:</strong> You should be able to tilt the x and y axes
simultaneously to move the object in any arbitrary direction on the
display. For example, you should be able to move the object from the
center directly to any of the four corners. The tilt sensitivity should
such that you can precisely control the position of your object, while
still being able to quickly move larger distances if needed.</p>
</blockquote>
<hr />
<h3 id="lab-checkoff-task-4"><em>Lab Checkoff Task 4</em></h3>
<ol type="1">
<li><p><strong>Demonstrate to your TA that you can move the ball up,
down, left and right across the OLED display by tilting the CC3200
Launchpad accelerometer about the x and y axes. Show that you can move
the ball from the center of the display to each corner of the display
and then back to the center.</strong></p></li>
<li><p><strong>Demonstrate that you can control the speed of the ball’s
motion by changing the tilt angle about the x and y axes with the
following specifications:</strong></p>
<ul>
<li><p>The ball should be at maximum speed when the tilt angle is 90
degrees (i.e. freefall). At maximum speed, it should take most 2 seconds
to move the ball from one edge of the display to the other.</p></li>
<li><p>When the accelerometer is barely tilted, the ball should move
very slowly. You should be able to precisely control the motion of the
ball on the OLED display, stopping it at any location on the
display.</p></li>
<li><p>You should be able to move the ball at any arbitrary angle across
the OLED display.</p></li>
</ul></li>
</ol>
<hr />
<h2 id="lab-report">Lab Report</h2>
<p>Refer to the <a href="lab-report.html">general lab report
instructions</a> for general formatting and guidelines.</p>
<p>Your lab report should include:</p>
<ul>
<li>A soft-copy of your well-written, <em>well-commented</em> code for
Task 4
<ul>
<li>Include your names in the header comments of the file containing
your main program.</li>
<li>This can be a copy of the entire project directory (which you can
export in CCS to a zip file by Right-Clicking the project name and
selecting <code>Export -&gt; General -&gt; Archive File</code> and
specifying the location)</li>
</ul></li>
<li>A well-written PDF report that contains, in addition to the general
guidelines:
<ul>
<li>An image of an SPI waveform captured by your Saleae logic probe
using the SPI protocol analyzer. <em>Explain how the waveform
corresponds to the known lines of code in your program, as well as the
SPI mode you used for the OLED interface and why you chose that
mode.</em></li>
<li>Two images of I2C waveforms captured by your Saleae logic probe
using the I2C protocol analyzer. Explain how the waveforms correspond to
the commands or instructions that caused them.</li>
<li>A description of any noteworthy difficulties you encountered in
constructing your solution.</li>
</ul></li>
</ul>
</article>
</html>